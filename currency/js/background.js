class Background{constructor(){let a=this;this.storage=STORAGE,this.initStorage(function(){a.run()})}initStorage(a){chrome.storage.local.get(this.storage,(b)=>{this.storage=b,'function'==typeof a&&a()})}saveStorage(){chrome.storage.local.set(this.storage)}run(){this.update(),setInterval(()=>this.update(),1200000)}update(){let a=this;const b=new XMLHttpRequest;b.open('GET','https://whatsrate.com/currency_api/',!0),b.onload=()=>{if(200!==b.status)return;const c=b.responseText,d=JSON.parse(c);d&&d.rates&&this.initStorage(function(){a.storage.rates=d.rates,a.saveStorage()})},b.send()}}const bg=new Background;